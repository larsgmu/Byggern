\hypertarget{_node2_2can__driver_8c}{}\doxysection{src/\+Node2/can\+\_\+driver.c File Reference}
\label{_node2_2can__driver_8c}\index{src/Node2/can\_driver.c@{src/Node2/can\_driver.c}}
{\ttfamily \#include \char`\"{}can\+\_\+driver.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mcp2515\+\_\+driver.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}M\+C\+P2515.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$avr/interrupt.\+h$>$}\newline
{\ttfamily \#include $<$util/delay.\+h$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{_node2_2can__driver_8c_a43bafb28b29491ec7f871319b5a3b2f8}\label{_node2_2can__driver_8c_a43bafb28b29491ec7f871319b5a3b2f8}} 
\#define {\bfseries F\+\_\+\+C\+PU}~16000000
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{_node2_2can__driver_8c_a1619e4e36842ab2508b1a3c18cb60ae3}\label{_node2_2can__driver_8c_a1619e4e36842ab2508b1a3c18cb60ae3}} 
void \mbox{\hyperlink{_node2_2can__driver_8c_a1619e4e36842ab2508b1a3c18cb60ae3}{can\+\_\+init}} ()
\begin{DoxyCompactList}\small\item\em Initializes C\+AN interace with interrupt. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_node2_2can__driver_8c_aba879c67850ce31ffa33d036e332d473}{can\+\_\+send\+\_\+msg}} (\mbox{\hyperlink{_node1_2can__driver_8h_abcf953177f5c4922095f6e061d378048}{C\+A\+Nmsg}} $\ast$can\+\_\+msg)
\begin{DoxyCompactList}\small\item\em Function to send specified C\+AN message. \end{DoxyCompactList}\item 
\mbox{\hyperlink{_node1_2can__driver_8h_abcf953177f5c4922095f6e061d378048}{C\+A\+Nmsg}} \mbox{\hyperlink{_node2_2can__driver_8c_aaa4b13222f2b8b64a9250eb61b47bfdb}{can\+\_\+receive\+\_\+msg}} ()
\begin{DoxyCompactList}\small\item\em Function to receive C\+AN message when interrupt is received. \end{DoxyCompactList}\item 
\mbox{\hyperlink{_node1_2can__driver_8h_abcf953177f5c4922095f6e061d378048}{C\+A\+Nmsg}} \mbox{\hyperlink{_node2_2can__driver_8c_a55da009558094d4693e6b24686cf8190}{get\+\_\+\+C\+A\+N\+\_\+msg}} ()
\begin{DoxyCompactList}\small\item\em Returns the latest received C\+AN message. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_node2_2can__driver_8c_a30a0ad88a89a84c0161cf09eace108e8}\label{_node2_2can__driver_8c_a30a0ad88a89a84c0161cf09eace108e8}} 
{\bfseries I\+SR} (I\+N\+T2\+\_\+vect)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file contains function to enable C\+AN communication between Node1 and Node2. Node2 uses a M\+C\+P2515 chip as a stand-\/alone C\+AN controller. The communication between atmega2560 and M\+C\+P2515 is done with S\+PI. Node2 uses a M\+C\+P2551 chip as C\+AN transceiver. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{_node2_2can__driver_8c_aaa4b13222f2b8b64a9250eb61b47bfdb}\label{_node2_2can__driver_8c_aaa4b13222f2b8b64a9250eb61b47bfdb}} 
\index{can\_driver.c@{can\_driver.c}!can\_receive\_msg@{can\_receive\_msg}}
\index{can\_receive\_msg@{can\_receive\_msg}!can\_driver.c@{can\_driver.c}}
\doxysubsubsection{\texorpdfstring{can\_receive\_msg()}{can\_receive\_msg()}}
{\footnotesize\ttfamily \mbox{\hyperlink{_node1_2can__driver_8h_abcf953177f5c4922095f6e061d378048}{C\+A\+Nmsg}} can\+\_\+receive\+\_\+msg (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Function to receive C\+AN message when interrupt is received. 

\begin{DoxyReturn}{Returns}
{\ttfamily C\+A\+Nmsg} -\/$>$ The received C\+AN message. 
\end{DoxyReturn}


Definition at line 63 of file can\+\_\+driver.\+c.

\mbox{\Hypertarget{_node2_2can__driver_8c_aba879c67850ce31ffa33d036e332d473}\label{_node2_2can__driver_8c_aba879c67850ce31ffa33d036e332d473}} 
\index{can\_driver.c@{can\_driver.c}!can\_send\_msg@{can\_send\_msg}}
\index{can\_send\_msg@{can\_send\_msg}!can\_driver.c@{can\_driver.c}}
\doxysubsubsection{\texorpdfstring{can\_send\_msg()}{can\_send\_msg()}}
{\footnotesize\ttfamily void can\+\_\+send\+\_\+msg (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_node1_2can__driver_8h_abcf953177f5c4922095f6e061d378048}{C\+A\+Nmsg}} $\ast$}]{can\+\_\+msg }\end{DoxyParamCaption})}



Function to send specified C\+AN message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em C\+A\+Nmsg$\ast$} & can\+\_\+msg -\/$>$ Pointer to C\+AN message to send. \\
\hline
\end{DoxyParams}


Definition at line 50 of file can\+\_\+driver.\+c.

\mbox{\Hypertarget{_node2_2can__driver_8c_a55da009558094d4693e6b24686cf8190}\label{_node2_2can__driver_8c_a55da009558094d4693e6b24686cf8190}} 
\index{can\_driver.c@{can\_driver.c}!get\_CAN\_msg@{get\_CAN\_msg}}
\index{get\_CAN\_msg@{get\_CAN\_msg}!can\_driver.c@{can\_driver.c}}
\doxysubsubsection{\texorpdfstring{get\_CAN\_msg()}{get\_CAN\_msg()}}
{\footnotesize\ttfamily \mbox{\hyperlink{_node1_2can__driver_8h_abcf953177f5c4922095f6e061d378048}{C\+A\+Nmsg}} get\+\_\+\+C\+A\+N\+\_\+msg (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Returns the latest received C\+AN message. 

\begin{DoxyReturn}{Returns}
{\ttfamily C\+A\+Nmsg} -\/$>$ Latest received C\+AN message. 
\end{DoxyReturn}


Definition at line 74 of file can\+\_\+driver.\+c.

